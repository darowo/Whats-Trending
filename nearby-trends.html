<html>
  <head>
    <script type="text/javascript" src="codebird.js"></script>
    <script type="text/javascript" src="jquery-3.1.1.min.js"></script>
    <script type="text/javascript">

      getLocation();

      function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition);
        } else {
          x.innerHTML = "Geolocation is not supported by this browser.";
        }
      }

      function showPosition(position) {
        var x = document.getElementById("demo");
        x.innerHTML = "Latitude: " + position.coords.latitude + 
        "<br>Longitude: " + position.coords.longitude; 

        var cb = new Codebird;
        var twitterAppKey = 'egrZfq0Pmzd1I7bSG7gA4Cumn'
        var twitterAppSecret = 'iGy6hlnzYE3NyMbcJL0EfkINTFvc4AiwLbB53v0no4mqJUVoHq'
        cb.setConsumerKey(twitterAppKey, twitterAppSecret);
        cb.__call(
          "oauth2_token",
          {},
          function (reply, err) {
            if (err) {
              console.log("error response or timeout exceeded" + err.error);
            }
            if (reply) {
              var authorisationToken = reply.access_token;
              cb.setBearerToken(authorisationToken);

              
              // continue here...
              // tip, you'll have to use cb.__call "trends_closest" here inside and use {lat: position.coords.latitude, long: position.coords.longitude} as the API request parameters 
              // afterwards, you'll need to use another cb.__call "trends_place" inside the reply function of trends_closest
              // Finally, you'll now then be able to get the list of trends that we need (see screenshot attached, I inserted debugger to pause)
              cb.__call(
                "trends_closest",
                 {
                   lat: position.coords.latitude,
                   long: position.coords.longitude
                 },
                 function (reply) {
                   if (reply) {
                     var woeid = reply[0].woeid;


                     cb.__call(
                        "trends_place",
                        {
                             id: woeid
                        },
                        function (reply) {
                      
                          var trends = reply[0].trends;
                        }
                     )
                   }
                 }
              )

            }
          }
        );
      }
    </script>
  </head>
  <body>
    <div id='demo'>
    </div>
  </body>
</html>